{% load static %}

<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>학습한 영상</title>
    <link rel="stylesheet" href="{% static 'css/learned.css' %}">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>

<body>
    <header>
        <a href="{% url 'home' %}" class="logo">
            <img src="{% static 'img/logo.png' %}" alt="logo" style="height: 100px;">
        </a>
        
        <nav>
            <a href="{% url 'guide' %}">Guides</a>
            <a href="{% url 'search' %}">Search</a>
            <a href="{% url 'mypage' %}">My profile</a>
            <div class="dropdown-container">
                <a href="#" class="classing">Classing</a>
                <div class="dropdown">
                    <a href="{% url 'learning' %}">Learning Video</a>
                    <a href="{% url 'learned' %}">Learned Video</a>
                </div>
            </div>
        </nav>
        <div class="auth">
            <div class="language-container">
                <a href="#" class="language">Language</a>
                <div class="language-dropdown">
                    <a href="{% url 'guidekor' %}">Korean</a>
                    <a href="{% url 'guide' %}">English</a>
                </div>
            </div>
            <a href="{% url 'login' %}" id="login-link">Login</a>
            <a href="{% url 'signup' %}" id="signup-link">Sign up</a>
            <a href="#" id="logout-link" style="display: none;">Logout</a>
        </div>
    </header>
  
    <main>
        
    </main>

    <script>
        /* document.addEventListener('DOMContentLoaded', function() {
            const learnedResultsContainer = document.getElementById('learned-results');
            learnedResultsContainer.innerHTML = '';  

            const learnedResults = [
                {
                    thumbnail: 'red',
                    title: 'HTML 기본 강의',
                    duration: '10:19',
                    channel: '웹디자인',
                    views: '30,000'
                },
                {
                    thumbnail: 'purple',
                    title: 'CSS 심화 강의',
                    duration: '25:00',
                    channel: 'css스타일',
                    views: '40,000'
                },
            ];

            learnedResults.forEach(result => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td><div class="thumbnail" style="background-color: ${result.thumbnail};"></div></td>
                    <td>${result.title}</td>
                    <td>${result.duration}</td>
                    <td>${result.channel}</td>
                    <td>${result.views}</td>
                    <td>
                        
                        <a href="analysis.html">
                        <button class="learn-btn">클릭</button>
                        </a>
                        
                        
                        </td>
                `;
                
                learnedResultsContainer.appendChild(row);
            });
        });
 */



            //^ 로그인 상태 확인
            $(document).ready(function() {
            
            $.get('/check-login', function(data) {
                if (data.loggedIn) {
            $('#login-link').hide();
            $('#signup-link').hide();
            $('#logout-link').show();
        } else {
            $('#login-link').show();
            $('#signup-link').show();
            $('#logout-link').hide();
        }
            });

            // 로그아웃 처리
            $('#logout-link').on('click', function(e) {
                e.preventDefault();
                $.get('/logout', function(data) {
                    if (data.success) {
                        alert('로그아웃 되었습니다.');
                        location.reload();
                    }
                });
            });
        });



    </script>

<div class="h1-container">
    <h1>학습한 영상</h1></div>
    <table>
        <thead>
            <tr>
                <th>썸네일</th>
                <th>영상제목</th>
                <th>영상길이</th>
                <th>채널명</th>
                <th>조회수</th>
                <th>복습하기</th>
            </tr>
        </thead>
        <tbody id="learned-results">
            <!-- 학습한 영상 목록 -->
        </tbody>
    </table>

<div class="recommender-section">
    <div class="recommender-h1-container">
        <h1>추천 영상</h1></div>
        <table>
            <thead>
                <tr>
                    <th>썸네일</th>
                    <th>영상제목</th>
                    <th>영상길이</th>
                    <th>채널명</th>
                    <th>조회수</th>
                    <th>학습하기</th>
                </tr>
            </thead>
            <tbody id="learning-results">
                <!-- 학습중인 영상 목록 -->
            </tbody>
        </table>

</body>
</html>
